<div class="bg-gray-50 py-8 px-4 sm:px-6 lg:px-8">
  <div class="max-w-3xl ma-auto">
    <!--  Header -->
    <div class="text-center mb-8">
      <h2 class="text-3xl font-bold text-gray-900">Upload Models</h2>
      <p class="mt-2 text-gray-600">Drop your models here or click to browse</p>
    </div>
    <!--  Upload Area -->
    <div
      class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center"
      [class.border-blue-500]="isDragging"
      (dragover)="onDragOver($event)"
      (dragleave)="onDragLeave($event)"
      (drop)="onDrop($event)"
      (click)="fileInput.click()"
    >
      <input
        #fileInput
        type="file"
        multiple
        accpet=".glb,.gltf"
        class="hidden"
        (change)="onFileSelected($event)"
      />

      <div class="space-y-4">
        <svg
          class="mx-auto h-12 w-12 text-gray-400"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2 2v12a2 2 0 002 2z"
          ></path>
        </svg>
        <p class="text-gray-600">
          Drag and drop your 3D Models here, or click to select files
        </p>
      </div>
    </div>

    <!-- Preview Area -->
    <div
      *ngIf="files.length"
      class="mt-8 grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4"
    >
      <div *ngFor="let file of files" class="relative group">
        <div
          class="relative aspect-w-1 aspect-h-1 w-full overflow-hidden rounded-lg bg-gray-100"
        >
          <!--Progress Overlay-->
          <div
            *ngIf="file.progress < 100 && !file.error"
            class="absolute inset-0 bg-opacity-50 flex items-center justify-center"
          >
            <div class="text-white">{{ file.progress }}%</div>
          </div>
          <!--Error Overlay-->
          <div
            *ngIf="file.error"
            class="absolute inset-0 bg-red-500 bg-opacity-50 flex items-center justify-center"
          >
            <div class="text-white text-sm px-2 text-center">
              {{ file.error }}
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Upload Button-->
    <div *ngIf="files.length" class="mt-6 flex justify-between items-center">
      <div class="text-sm text-gray-600">
        {{ getUploadStatus() }}
      </div>
      <button
        (click)="uploadFiles($event)"
        [disabled]="buttonDisabled()"
        class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hove:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"
      >
        <span *ngIf="!isUploading">{{
          allFilesUploaded() ? "All Files Uploaded" : "Upload All"
        }}</span>
        <span *ngIf="isUploading">Uploading...</span>
      </button>
    </div>
  </div>
</div>
